{% extends "base.html" %} {% block title %} Kegelabend {{
game.date_created.strftime('%Y-%m-%d') }} {% endblock %} {% block content %}
<script src="/static/js/game_configuration.js"></script>
<table class="table table-responsive">
  <thead>
    <tr class="text-center text-style">
      <th colspan="{{ all_penalties|length + 2 }}">Gametable</th>
    </tr>
  </thead>  
  <tbody>
    {% for player_record in player_record_list %}
    <tr class="text-center text-style">
      <td style="vertical-align: middle">
        <div onclick="displayUserPenalties('{{ player_record.game_id}}-{{ player_record.participant_id }}-tablecell')" class="player-square">{{player_record.participant_name}}</td></div>
      {% for penalty in player_record.penalties %}
      <td class="hideRow" id="{{ player_record.game_id}}-{{ player_record.participant_id }}-tablecell" style="min-width: 150px">
        <br>
        {{penalty.penalty_name}}
        <br>
        <div
          id="{{player_record.game_id}}-{{penalty.id}}-{{player_record.participant_id}}-{{penalty.penalty_amount}}-penalty-quantity"
        > 
          {{penalty.penalty_quantity}}
        </div>
        <button
          id="{{player_record.game_id}}-{{ penalty.id}}-{{player_record.participant_id}}-add"
          onclick="update_quantity('{{ player_record.game_id }}-{{ penalty.id}}-{{player_record.participant_id}}-{{penalty.penalty_amount}}-add')"
          class="quantity-up-button"
          style="height: 40px; width: 40px; background-color: lightgreen"
          type="submit"
        >
          &#43;
        </button>
        <button
          id="{{player_record.game_id}}-{{ penalty.id}}-{{player_record.participant_id}}-subtract"
          onclick="update_quantity('{{ player_record.game_id }}-{{ penalty.id}}-{{player_record.participant_id}}-{{penalty.penalty_amount}}-subtract')"
          class="quantity-down-button"
          style="height: 40px; width: 40px; background-color: #f87217"
          type="submit"
        >
          &#8722;
        </button>
      </td>
      {% endfor %}
      <td>
      <div 
        id="{{ player_record.game_id }}-{{ player_record.participant_id }}-total-fine" style="vertical-align: middle"> <br>Total <br>{{player_record.participant_total_fine.total_pay_amount}} â‚¬
      </div>
      </td>
    </tr>
    {% endfor%}
  </tbody>
</table>
<form
  action="{{ url_for('configure.save_game', game_id = game.id) }}"
  method="POST"
>
  <button type="submit" class="mb-4 game-save-btn btn-primary">
    Speichern
  </button>
</form>
<form
  action="{{ url_for('configure.finish_game', game_id = game.id) }}"
  method="POST"
>
  <button type="submit" class="mb-4 game-finish-btn btn-primary">
    Abend beenden
  </button>
</form>
<br />
<br />
{% endblock %}
